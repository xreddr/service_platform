<!DOCTYPE html>
{% extends 'cookbook/base.html' %}

{% block header %}

<h1>{{ g.user['username'] }}'s Cookbook</h1>

<section id="cb_home_menu">
    
    <a href="{{ url_for('web.cookbook.new_recipe') }}"><button class="cat_button glass">New Recipe</button></a>
    <a href="{{ url_for('web.cookbook.calendar') }}"><button class="cat_button glass">Calendar</button></a>
    <a href="{{ url_for('web.cookbook.edit_category' )}}"><button class="glass cat_button">Edit Categories</button></a>
    
    <form method="POST" action="{{ url_for('web.cookbook.new_category') }}">
        <input type="text" name="category" placeholder="New Category" required>
        <input type="submit" value="Add">
    </form>

</section>

{% endblock %}


{% block content %}

<section id="category_buttons">
    {% if categories %}
    <a href="{{ url_for('web.cookbook') }}" class="glass">clear list</a>

    {% for category in categories %}
    <button onclick="catShowHide(this)" class="cat_button glass">{{category['name']}}</button>

    <section class="recipe_list" style="display:none;flex-direction:column;justify-content:center;">
        {% for recipe in recipes %}
        {% if recipe['category_id'] == category['id'] %}
        <h1><a href="{{ url_for('web.cookbook.recipes', recipe_id=recipe['id']) }}">{{ recipe['title'] }}</a>
        </h1>
        {% endif %}
        {% endfor %}
    </section>
    {% endfor %}

    {% endif %}

    <button onclick="catShowHide(this)" class="cat_button glass">uncategorized</button>

    <section class="recipe_list" style="display:none;flex-direction:column;justify-content:center;">
        {% for recipe in recipes %}
        {% if not recipe['category_id'] %}
        <h1><a href="{{ url_for('web.cookbook.recipes', recipe_id=recipe['id']) }}">{{ recipe['title'] }}</a>
        </h1>
        {% endif %}
        {% endfor %}
    </section>        

    <button onclick="catShowHide(this)" class="cat_button glass">all</button>

    <section class="recipe_list" style="display:none;flex-direction:column;justify-content:center;">
        {% for recipe in recipes %}
        <h1><a href="{{ url_for('web.cookbook.recipes', recipe_id=recipe['id']) }}">{{ recipe['title'] }}</a>
        </h1>
        {% endfor %}
    </section>

</section>

{% endblock %}
